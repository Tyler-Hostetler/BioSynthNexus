# BioSynthNexus

---

## Overview

A graphical user interface to easily access and output protein data.

Extracts data from a 
**Genome Neighborhood Network (GNN)** SQLITE file
generated by the Genome neighborhood tool (GNT) from 
Enzyme Function Initiative (EFI) Tools.
For more information on generating the GNN see the 
[EFI website](https://efi.igb.illinois.edu/).<sup>1,2</sup>

Extracts [UniProt](https://www.uniprot.org/)
data for a given protein Accession ID (or from a list of IDs).<sup>3</sup>


---
## Running, Installation, Packaging

### Running the Program Directly from an Executable
Provided in the `Distribution` directory are pre-packaged executables that can be download for the user's operating system of choice.

### Manual Installation / Packaging

An enviorment can be created with pipenv or conda using the provided Pipfile or requirements.txt

#### Pipenv
- Open terminal in directory containing the repository
- Run `pipenv install`<br/>
  - All required dependencies should then be installed<br/>
- The program can then be run with `pipenv run python main.py`

#### Conda
- Open terminal in directory containing the repository
- Create a conda enviorment `conda create -n env_name python=3.10 pip`
- Activate enviorment `conda activate env_name`
- Install Requirements `pip install -r requirements.txt`
- Run the program `python main.py`

#### Packaging into an application (optional)
If you would like to package your modified code into a single executable, pyinstaller is included in the dev-packages of the Pipfile
- Open terminal in repositiory directory
- Run `pipenv install -d`
  - Note: If you are using a conda enviorment, you have to manually install pyinstaller `pip install pyinstaller`
- Run `pyinstaller --windowed --onefile --add-data=ui_main_window.ui:./ --add-data=custom_ui_theme.xml:./ main.py`
  - A Folder named `dist` will contain the packaged application

---
### Terminology:

Query Accessions - The accessions used to generate the SQLite File.
<br> Note: The query accession is the same as the BGC ID, but will be referred to individually throughout.

GNN - Genome Neighborhood Network

---
## Input / Output Options:
### UniProt Requests:

| Output             | Input           | Description                                     |
|--------------------|-----------------|-------------------------------------------------|
| FASTA              | Accession ID(s) | Gets the FASTA Sequence(s)                      |
| GenBankID          | Accession ID(s) | Gets the GenBank Nucleotide Sequence ID(s)      |
| GenBank_Protein_ID | Accession ID(s) | Gets the GenBank Protein ID(s)                  |   
| GenBank_ORF_ID     | Accession ID(s) | Gets the GenBank Open Reading Frame (ORF) ID(s) |

### BGC Requests:


| Output                      | Input                                             | Description                                                                                                                                                                                                                                |
|-----------------------------|---------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Query Accession             | PFam ID(s)                                        | Gets the Query Accession IDs that correspond to their BGCs containing the given PFam ID(s)                                                                                                                                                 |
| BGC ID                      | PFam ID(s)                                        | Gets the BGC ID(s) for those that contain the given PFam ID(s)                                                                                                                                                                             |
| BGC-PFam                    | BGC ID                                            | Gets the PFams for each of the proteins within a single BGC                                                                                                                                                                                |
| BGC-Accession               | BGC ID                                            | Gets the Accession IDs for each of the proteins within a single BGC                                                                                                                                                                        |
| Accessions from BGC by PFam | BGC ID(s)<br/> + PFam (Secondary Input)           | Gets the Accession IDs for the protein within each BGC with the selected PFam </br> Displays as 'Output Accession_(BGC ID)'                                                                                                                |
| BGC-PFam Similarity         | PFam ID(s)<br/> Optional: PFam in Secondary Input | Searches all BGCs for each given PFam ID, Displays as 'BGC_ID(number of PFams it contains from the given input list)'<br/>The `Secondary Input` can be used to limit the searched BGCs to those that contain this inputed secondary PFam ID |

Notes: 
1. The `Accessions from BGC by PFam` outputs as `Output Accession_(BGC ID)`,
however if you use `Replace Input with Output`, only the Output Accession will be displayed.
2. If the input field is empty, BGCs that contain unannotated proteins will be considered.

---
## BGC Request:
- Click the `Upload` button to select your GNN *.sqlite file
- Change the Request Type to `BGC`
- Select your desired output (See **BGC Requests** above for guidance)
- Fill the left text field, labelled 'Input', with respective input
- Click `Search`
- Output will be displayed in the right text field, labelled 'Output'
- The text in the Output Box can be used as an Input by utilizing the `Replace Input with Output` Button

---
## Usage examples:

### Example 1:
You have a GNN of the query accessions, you want to search for all BGCs which contain proteins assigned with the PFam `PF...`.
Then you would like to get the accession IDs associated with the Pfam proteins that you just found.
Lastly, you would like the FASTA sequence for each of those proteins to compare.


#### Get the BGCs that contain the PFam(s) of interest
1. Upload the GNN generated for protein X
2. Enter the PFam(s) into the input field
3. Select `BGC ID` as the Output Type
4. Click `Search`
   1. Displayed will be all BGCs that contain at least one protein associated with the given PFam

#### Get the Accession IDs for each of proteins associated with an inputed PFam
1. Click `Replace Input with Output`
2. Enter your PFam into the `Secondary Input` Field
3. Select `Accessions from BGC by PFam` as the Output Type
4. Click `Search`
   1. Displayed will be the Accession ID of each protein that is contains the PFam 'PF10862'
   2. In parentheses is the BGC ID (If one BGC contains multiple proteins with the given PFam they will be displayed on separate lines)

#### Get the FASTA for each of the proteins
1. Click `Replace Input with Output`
2. Change request type to `UniProt`
3. Select `FASTA` as the Output Type
4. Click `Search`
   1. It may take some time, depending on the number of accessions being searched
   2. Displayed will be the FASTA Sequences for each of the proteins
   3. Some accession ID FASTAs may fail to be obtained due to their absence within UniProt


Note: At anyone of these steps the Output can be saved to a text document by clicking `Save`.

### Example 2:

You have a GNN of query accessions, you want to compare a target BGC to the other BGCs by comparing PFams.
#### 1. Getting PFams of a BGC
1. Upload the GNN
2. Select `BGC` as the `Request Type`
3. Select `BGC-PFam` as the `Output Type`
4. Enter the BGC ID of interest in the input field
5. Click `Search`
   1. Displayed are all the PFams found within the given BGC

#### 2. Creating a BGC Similarity Table
1. Click `Replace Input with Output`
2. Select `BGC-PFam-Similarity` as the `Output Type`
3. Click `Search`
   1. Displayed are the BGC-IDs with their number of PFams they contain from the given list
4. Click `Output Similarity Table`
   1. You will be prompted to save the *.csv file
   2. The *.csv file provides the searched BGC IDs and whether or not they contain the given PFam ID(s)

Note: You may skip the part 1 and simply enter the PFams you wish to compare all BGCs

Note: When searching in part 2, you may enter a PFam into the `secondary input` to limit the BGCs search to those
that at lease contain that given PFam

---

## References

1. Rémi Zallot, Nils Oberg, and John A. Gerlt, The EFI Web Resource for Genomic Enzymology Tools: Leveraging Protein, Genome, and Metagenome Databases to Discover Novel Enzymes and Metabolic Pathways. Biochemistry 2019 58 (41), 4169-4182.
2. Nils Oberg, Rémi Zallot, and John A. Gerlt, EFI-EST, EFI-GNT, and EFI-CGFP: Enzyme Function Initiative (EFI) Web Resource for Genomic Enzymology Tools. J Mol Biol 2023.
3. The UniProt Consortium , UniProt: the Universal Protein Knowledgebase in 2023, Nucleic Acids Research, Volume 51, Issue D1, 6 January 2023, Pages D523–D531